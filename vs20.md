# RFC for improved Vue Storefront architecture

This document describes our future plans and ideas (still as a working draft on early stages) for Vue Storefront architecture.

## Motivation and backstory

Our goal is to make Vue Storefront extremely flexible and easy to customize **framework** for eCommerce. Users should be able to combine different services in any way they want to deliver best shopping experience for their use cases.

Currently even though Vue Storefront is backend-agnostic in theory it's tied to Magento formats and therefore to the Magento way of approaching eCommerce functionalities.

It's possible to connect any other backend to Vue Storefront via connector which is basically mapping other eCommerce API to the Magento one. This approach obviously has many limitations and the more connected solution differs from Magento the harder it is to make such connector. The quality of connectors that need to make a lot of workarounds to adjust the way their eCommerce is solving thing to the Magento one is also suffering very much.

We want Vue Storefront to be some kind of Nuxt for eCommerce which means you should be able to choose the technologies you want, install proper modules and build a theme based on this modules. We should fulfil use cases such as
- Product catalog on PIM, headless checkout/cart, CMS content from PIM or Wordpress/Prismic etc
- eCommerce features from Magento, content from other CMS
- eCommerce features from headless solution X, cart from Y, checkout from Z, content from V

...etc. In short words Vue Storefront should be **an engine** that allows combining different technologies into one eCommerce store rather than a template for Magento.

## High-level overview of solution

To fultil this needs we came up with a list of steps that needs to be done to provide truly backend-agnostic solution and ensure the quality of every integration.

**Backend-agnostic and platform specific parts**

- Vue Storefront core and some parts of theme  are the only real backend-agnostic elements.
- Modules from core that are tied to Magento logic should be treated as Magento modules (and potentially moved to another repo/dir). 
- Every new integration should have it's own modules for it's platform-specific eCommerce features (for example catalog-magento, catalog-shopware, catalog-woocomemrce, cms-wordpress, cms-prismic etc)
- Modues are not depending on each other so we can combine different technologies easily.

The implication of having platform-specific modules is a huge reduction in project complexity. In most of teh situations migrator and vs-api can be totally omitted and the communication can be direct via API.

**How logic is consumed**

- In themes we use modules logic only via Vuex actions/getters (and potentially some helper functions). 
- ... according to the above statement core components will be depreciated and Vuex api will be improved to expose easy to work with API. It will remove a lot of complexity.

- Core pages will be in proper modules

**How Themes will look like**

- Themes will be platform-specific but a lot of things can be reused.

Once we have whole communication done through Vuex actions/getter a lot of theming opportunities will open.

- People can easily create new shop designs from scratch and just use core getters/actions
- Themes across different eCommerces will obviously differ hence UI libraries to make the customization extrmeely easy.

To consider:
- There should be always one purely presentational theme not connected to any logic (in other repo). People can install modules that they want (for eCommerce, CMS etc) and just connect them to this theme via actions/getters.

## Action plan

1. Move old core pages to compatibility folder and remain untouched for backward comaptibility. Make an alias to not break existing shops.
2. Move logic from core pages to Vuex so it can be easily consumed by new theme (Theme 2.0). Old actions and getter must remain for backward compatibility but shouldn't be included in docs and warnings should be prompted every time they are used.
3. Once we have a good Vuex API for Magento investigate which parts of Vue Storefront outside modules aren't backend-agnostic and adjust them.
4. Once we are done with the core discuss which modules should be platform-specific and mark them as Magento-specific

